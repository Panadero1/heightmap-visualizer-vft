CFLAGS = -I/home/jacob/Code/gimp/include/gimp-3.0 \
-I/home/jacob/Code/heightmap-visualizer-vft/lib/libepoxy/include \
-I/home/jacob/Code/heightmap-visualizer-vft/lib/cglm/include \
-I/usr/include/gtk-3.0 \
-I/usr/include/pango-1.0 \
-I/usr/include/cloudproviders \
-I/usr/include/cairo \
-I/usr/include/at-spi2-atk/2.0 \
-I/usr/include/at-spi-2.0 \
-I/usr/include/atk-1.0 \
-I/usr/include/dbus-1.0 \
-I/usr/lib/dbus-1.0/include \
-I/usr/include/fribidi \
-I/usr/include/harfbuzz \
-I/home/jacob/Code/gimp/include/gegl-0.4 \
-I/usr/include/json-glib-1.0 \
-I/home/jacob/Code/gimp/include/babl-0.1 \
-I/usr/include/pixman-1 \
-I/usr/include/gdk-pixbuf-2.0 \
-I/usr/include/glycin-2 \
-I/usr/include/freetype2 \
-I/usr/include/libpng16 \
-I/usr/include/gio-unix-2.0 \
-I/usr/include/libmount \
-I/usr/include/blkid \
-I/usr/include/glib-2.0 \
-I/usr/lib/glib-2.0/include \
-I/usr/include/sysprof-6 \
-pthread \
-L/home/jacob/Code/gimp/lib \
-L/home/jacob/Code/heightmap-visualizer-vft/lib/libepoxy/_build/src \
-lgimpui-3.0 -lgimpwidgets-3.0 -lgimpmodule-3.0 -lgimp-3.0 -lgimpbase-3.0 \
-lgimpcolor-3.0 -lgimpconfig-3.0 -lgimpmath-3.0 -lgtk-3 -lgdk-3 -lz -lpangocairo-1.0 \
-lcairo-gobject -latk-1.0 -lpango-1.0 -lharfbuzz -lgegl-0.4 -lgegl-npd-0.4 \
-Wl,--export-dynamic -ljson-glib-1.0 -lbabl-0.1 -lgexiv2 -lcairo -lgdk_pixbuf-2.0 \
-lgio-2.0 -lgobject-2.0 -lgmodule-2.0 -pthread -lglib-2.0 \
-lepoxy -lm \
-Wno-unused-command-line-argument

# -IC:/Users/User/Documents/Code/gimp/_install/include -DINI_SHARED_LIB
# -IC:/msys64/clang64/include/webp -DLIBDEFLATE_DLL

# -lintl -lepoxy -lm

CC = gcc

test: install
	/home/jacob/Code/gimp/bin/gimp

install: build
	cp ./heightmap-visualizer-vft /home/jacob/.config/GIMP/3.2/plug-ins/heightmap-visualizer-vft -f
build: out/main.o
	$(CC) -o heightmap-visualizer-vft out/*.o $(CFLAGS)

out/main.o: heightmap-visualizer-vft.c
	$(CC) -o out/main.o -c heightmap-visualizer-vft.c $(CFLAGS)
